$(function() {
	var sendctl = $.url.param("sendctl");
	var CardNo = $.url.param("CardNo");
	
	var rtnValue = "";
	switch (sendctl) {
		// 必殺技
		case "SKILL_DESC":
			rtnValue = "技能CD：" + GetSkillCD(window.cooldowns[CardNo - 1]) + "<BR>" + GetData(CardNo, 'SKILL_DESC');
			break;
		// 船長技
		case "CAP_DESC":
			rtnValue = GetData(CardNo, 'CAP_DESC');
			break;
		// 船員技
		case "CREW_DESC":
			rtnValue = GetData(CardNo, 'CREW_DESC');
			break;
		// 突破
		case "BREAK_THROUGH":
			rtnValue = GetData(CardNo, 'BREAK_THROUGH');
			break;
		// 取得
		case "TO_GET":
			rtnValue = GetData(CardNo, 'TO_GET');
			break;
		// 技能書
		case "BOOK":
			rtnValue = GetData(CardNo, 'BOOK');
			break;
		// 解放
		case "LIBERATION":
			rtnValue = GetData(CardNo, 'LIBERATION');
			break;
	}
	
	$('body').append(rtnValue);

	function GetData(id, kind) {
		for (var data in window.CData) {				
			if (window.CData[data]["CARD_NO"]==('0000' + id.toString()).substr(-4)) {
				return window.CData[data][kind];
			}			
		}
		return '';
	}
	
	function GetSkillCD(o) {
		var LV1 = 0;
		var LVMAX = 0;
		if (o==null)
			return "";
		else {
			try {
				$.each(o, function(data) {
					if (data==0)
						LV1 = parseInt(o[data]);
					else
						LVMAX = parseInt(o[data]);
				});
			} catch (e) {			
				LV1 = parseInt(o);
			}
		}
			
		if (LVMAX == 0)
			return LV1;
		else 
			return LV1 + '→' + LVMAX;
	}
});

